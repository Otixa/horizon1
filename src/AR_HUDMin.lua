--@class AR_HUDMin
mouseSensitivity = 1 --export: Enter your mouse sensativity setting
enableARReticle = false --export: Enable AR reticle
json=require('dkjson')quat=require('cpml/quat')vec3=require('cpml/vec3')const=require('cpml/constants')vec2=require('cpml/vec2')utils=require('cpml/utils')mat4=require("cpml/mat4")mouseDeltaSum=vec2(0,0)local function a(b)if b>0 then return 1 elseif b<0 then return-1 else return 0 end end;function scaleViewBoundsY(c)local d=0;local e=1250/mouseSensitivity;local f=-(system.getScreenHeight()/2)local g=system.getScreenHeight()/2;return(c-d)/(e-d)*(g-f)+f end;function scaleViewBoundsX(h)local d=1;local e=-1;if a(forwardX.x)==-1 and a(forwardX.y)==-1 then d=-1;e=1 elseif a(forwardX.x)==1 and a(forwardX.y)==-1 then d=-1;e=1 end;local f=-(system.getScreenHeight()/2)local g=system.getScreenHeight()/2;return(h-d)/(e-d)*(g-f)+f end;function scaleViewBound(d,e,f,g,i)return(i-d)/(e-d)*(g-f)+f end;function deltaSum(j,k)local l=0;local m=0;if j.y+k.y<=0 then m=0 elseif j.y+k.y>=1250/mouseSensitivity then m=1250/mouseSensitivity else m=j.y+k.y end;return vec2(l,m)end;function updateAR()local n=vec2(system.getMouseDeltaX(),system.getMouseDeltaY())mouseDeltaSum=deltaSum(mouseDeltaSum,n)playerQ=quat(unit.getMasterPlayerRelativeOrientation())forwardX=playerQ*vec3(core.getConstructOrientationForward())ship.viewY=scaleViewBoundsY(mouseDeltaSum.y)ship.viewX=scaleViewBoundsX(forwardX.x)end
