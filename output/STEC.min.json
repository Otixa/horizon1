{"events":[],"slots":{"5":{"type":{"events":[],"methods":[]},"name":"slot6"},"6":{"type":{"events":[],"methods":[]},"name":"slot7"},"7":{"type":{"events":[],"methods":[]},"name":"slot8"},"8":{"type":{"events":[],"methods":[]},"name":"slot9"},"1":{"type":{"events":[],"methods":[]},"name":"slot2"},"2":{"type":{"events":[],"methods":[]},"name":"slot3"},"3":{"type":{"events":[],"methods":[]},"name":"slot4"},"4":{"type":{"events":[],"methods":[]},"name":"slot5"},"-2":{"type":{"events":[],"methods":[]},"name":"system"},"-1":{"type":{"events":[],"methods":[]},"name":"unit"},"0":{"type":{"events":[],"methods":[]},"name":"core"},"9":{"type":{"events":[],"methods":[]},"name":"slot10"},"-3":{"type":{"events":[],"methods":[]},"name":"library"}},"methods":[],"handlers":[{"code":"keybindPresets[\"maneuver\"]=KeybindController()\nkeybindPresets[\"maneuver\"].Init=function()\nmouse.enabled=true;mouse.lock()ship.ignoreVerticalThrottle=false\nship.direction.y=0;ship.throttle=1 end\nkeybindPresets[\"maneuver\"].keyDown.up.Add(function()\nship.direction.z=1 end)\nkeybindPresets[\"maneuver\"].keyUp.up.Add(function()\nship.direction.z=0 end)\nkeybindPresets[\"maneuver\"].keyDown.down.Add(function()ship.direction.z=\n-1 end)\nkeybindPresets[\"maneuver\"].keyUp.down.Add(function()\nship.direction.z=0 end)\nkeybindPresets[\"maneuver\"].keyDown.left.Add(function()ship.direction.x=\n-1 end)\nkeybindPresets[\"maneuver\"].keyUp.left.Add(function()\nship.direction.x=0 end)\nkeybindPresets[\"maneuver\"].keyDown.right.Add(function()\nship.direction.x=1 end)\nkeybindPresets[\"maneuver\"].keyUp.right.Add(function()\nship.direction.x=0 end)\nkeybindPresets[\"maneuver\"].keyDown.forward.Add(function()\nship.direction.y=1 end)\nkeybindPresets[\"maneuver\"].keyUp.forward.Add(function()\nship.direction.y=0 end)\nkeybindPresets[\"maneuver\"].keyDown.backward.Add(function()ship.direction.y=\n-1 end)\nkeybindPresets[\"maneuver\"].keyUp.backward.Add(function()\nship.direction.y=0 end)\nkeybindPresets[\"maneuver\"].keyDown.yawleft.Add(function()ship.rotation.y=\n-1 end)\nkeybindPresets[\"maneuver\"].keyUp.yawleft.Add(function()\nship.rotation.y=0 end)\nkeybindPresets[\"maneuver\"].keyDown.yawright.Add(function()\nship.rotation.y=1 end)\nkeybindPresets[\"maneuver\"].keyUp.yawright.Add(function()\nship.rotation.y=0 end)\nkeybindPresets[\"maneuver\"].keyDown.brake.Add(function()\nship.brake=true end)\nkeybindPresets[\"maneuver\"].keyUp.brake.Add(function()\nship.brake=false end)\nkeybindPresets[\"maneuver\"].keyDown.stopengines.Add(function()\nif\nnot SHUD.Enabled then mouse.unlock()mouse.enabled=false end end,\"Free Look\")\nkeybindPresets[\"maneuver\"].keyUp.stopengines.Add(function()\nSHUD.Select()\nif not SHUD.Enabled then mouse.lock()mouse.enabled=true end end)\nkeybindPresets[\"maneuver\"].keyUp.speedup.Add(function()SHUD.Enabled=\nnot SHUD.Enabled end)\nkeybindPresets[\"maneuver\"].keyUp[\"option1\"].Add(function()ship.counterGravity=\nnot ship.counterGravity end,\"Gravity Suppression\")\nkeybindPresets[\"maneuver\"].keyUp[\"option2\"].Add(function()ship.followGravity=\nnot ship.followGravity end,\"Gravity Follow\")\nkeybindPresets[\"maneuver\"].keyUp[\"option3\"].Add(function()\nship.direction.y=1 end,\"Cruise Control\")keybindPreset=\"maneuver\"\nSHUD.Init(system,unit,keybindPresets[keybindPreset])","key":1,"filter":{"slotKey":"-1","signature":"start()","args":[]}},{"code":"system.showScreen(0)","key":2,"filter":{"slotKey":"-1","signature":"stop()","args":[]}},{"code":"\nkeybindPresets[keybindPreset].Call(action,\"down\")","key":3,"filter":{"slotKey":"-2","signature":"actionStart(action)","args":[{"variable":"*"}]}},{"code":"\nkeybindPresets[keybindPreset].Call(action,\"up\")","key":4,"filter":{"slotKey":"-2","signature":"actionStop(action)","args":[{"variable":"*"}]}},{"code":"\nkeybindPresets[keybindPreset].Call(action,\"loop\")","key":5,"filter":{"slotKey":"-2","signature":"actionLoop(action)","args":[{"variable":"*"}]}},{"code":"if mouse then mouse.apply()ship.apply()end","key":6,"filter":{"slotKey":"-2","signature":"flush()","args":[]}},{"code":"if SHUD then SHUD.Render()end","key":7,"filter":{"slotKey":"-1","signature":"tick(timerId)","args":[{"value":"HUD"}]}},{"code":"if SHUD then SHUD.Update()end","key":8,"filter":{"slotKey":"-2","signature":"update()","args":[]}},{"code":"\nfunction DynamicDocument(QDmk)local M4_={}M4_.template=QDmk or\"\"local h2=\"\"local kZQU={}M4_.tree={}\nlocal Z={br=true,hr=true,img=true,embed=true,param=true,area=true,col=true,input=true,meta=true,link=true,base=true,basefont=true,iframe=true,isindex=true,circle=true,polygon=true,line=true,rect=true,use=true}function table.indexOf(pVR,umiZ3)\nfor j6oPrH,xb in ipairs(umiZ3)do if xb==pVR then return j6oPrH end end;return nil end\nfunction M4_.makeFunc(z0hMKZ)\nlocal z=\"nil\"\nif kZQU[z0hMKZ]==nil then\nlocal X,l=pcall(load(\"return function() return \"..z0hMKZ..\" end\",nil,\"t\",_ENV))if X then kZQU[z0hMKZ]=l;z=l()\nif type(z)==\"function\"then kZQU[z0hMKZ]=l()z=z()end end else z=kZQU[z0hMKZ]()end;return z end\nlocal function PeOQQN(QDmk)local QLLka1=0;local jGc={}local N7c={}N7c.dd={}table.insert(jGc,N7c)local UNcj={}\nfor yPH,Vi0vV,PuRz,q,n,vZwY9,l,xkDS_ in\nstring.gmatch(QDmk,\"(<)(%/?!?)([%w:_-'\\\\\\\"%[]+)(.-)(%/?%-?)>([%s\\r\\n\\t]*)([^<]*)([%s\\r\\n\\t]*)\")do PuRz=string.lower(PuRz)\nif Vi0vV==\"/\"then if QLLka1 ==0 then return N7c end;QLLka1=\nQLLka1-1;table.remove(jGc)else local function M(qMLla)local gyOB1=\"dd-\"return qMLla:sub(1,#gyOB1)==\ngyOB1 end;QLLka1=\nQLLka1+1;UNcj={}UNcj.name=PuRz;UNcj.children={}UNcj.attr={}if\njGc[QLLka1-1]then\nUNcj.parent=jGc[QLLka1-1][#jGc[QLLka1-1]]else UNcj.parent=nil end\nif q~=\"\"then\nfor WswI,npVrN1 in\nstring.gmatch(q,\"%s([^%s=]+)=\\\"([^\\\"]+)\\\"\")do\nUNcj.attr[WswI]=string.gsub(npVrN1,'\"','[^\\\\]\\\\\"')if M(WswI)then if not N7c.dd[WswI]then N7c.dd[WswI]={}end\ntable.insert(N7c.dd[WswI],UNcj)end end\nfor KL9,JlDv1 in string.gmatch(q,\"%s([^%s=]+)='([^']+)'\")do\nUNcj.attr[KL9]=string.gsub(JlDv1,'\"','[^\\\\]\\\\\"')if M(KL9)then if not N7c.dd[KL9]then N7c.dd[KL9]={}end\ntable.insert(N7c.dd[KL9],UNcj)end end end;if not jGc[QLLka1]then jGc[QLLka1]={}end\ntable.insert(jGc[QLLka1],UNcj)\nif Z[PuRz]then if l~=\"\"then\ntable.insert(jGc[QLLka1],{name=\"textNode\",value=l})end;UNcj.children={}QLLka1=QLLka1-1 else if l~=\"\"then\ntable.insert(UNcj.children,{name=\"textNode\",value=l})end\ntable.insert(jGc,UNcj.children)end end end;return N7c end\nlocal function ejjA(C4W0,y)local e1={C4W0}local iD1O=\"\"\nlocal function UX7LC(I1zjv)local G=0;for Q in pairs(I1zjv)do G=G+1 end;return G end\nif not y and UX7LC(C4W0.dd)>0 then\nif C4W0.dd[\"dd-repeat\"]then\nfor sGIpQI=#\nC4W0.dd[\"dd-repeat\"],1,-1 do local NapYw=C4W0.dd[\"dd-repeat\"][sGIpQI]\nvar,array=string.match(NapYw.attr[\"dd-repeat\"],\"(.*) in (.*)\")NapYw.attr[\"dd-repeat\"]=nil;local AZwHk=ejjA({NapYw},true)\nlocal eAu8=string.gmatch(AZwHk,\"{{([^}}]+)}}\")local kDCS0e={}for i in eAu8 do\nif string.match(i,var)then table.insert(kDCS0e,i)end end;local h2=\"\"\nlocal _=M4_.makeFunc(array)\nfor sGIpQI=1,#_ do _ENV[var]=_[sGIpQI]local BE4ZHb=AZwHk\nlocal Vg=PeOQQN(BE4ZHb:gsub(\"^%s*(.-)%s*$\",\"%1\"))h2=h2 ..ejjA(Vg)end;NapYw.children={}NapYw.name=\"textNode\"NapYw.value=h2 end end\nif C4W0.dd[\"dd-if\"]then\nfor urj=#C4W0.dd[\"dd-if\"],1,-1 do\nlocal o_hxlN=C4W0.dd[\"dd-if\"][urj]local Ap5JD=M4_.makeFunc(o_hxlN.attr[\"dd-if\"])\nif Ap5JD then o_hxlN.attr[\"dd-if\"]=\nnil else\nlocal ukVuY=table.indexOf(o_hxlN,o_hxlN.parent.children)if ukVuY then\ntable.remove(o_hxlN.parent.children,ukVuY)end;o_hxlN=nil\ntable.remove(C4W0.dd[\"dd-if\"],urj)C4W0.dd[\"dd-if\"][urj]=nil end end end\nif C4W0.dd[\"dd-init\"]then\nfor hham=#C4W0.dd[\"dd-init\"],1,-1 do\nlocal O35h=C4W0.dd[\"dd-init\"][hham]\npcall(load(O35h.attr[\"dd-init\"],nil,\"t\",_ENV))O35h.attr[\"dd-init\"]=nil end end end\nwhile#e1 ~=0 do node=e1[#e1][1]if not node then break end\nif node.name==\"textNode\"then\nlocal j=node.value:gsub(\"^%s*(.-)%s*$\",\"%1\")if not y then j=M4_.transformClosures(j)end\niD1O=iD1O..j else\niD1O=iD1O..\"\\n\"..string.rep(\" \",#e1-1)iD1O=iD1O..\"<\"..node.name\nif node.attr then\nfor pXlXSI,xcACYY in pairs(node.attr)do\nif not y then\npXlXSI=M4_.transformClosures(pXlXSI)xcACYY=M4_.transformClosures(xcACYY)end\niD1O=iD1O..\" \"..pXlXSI..'=\"'..xcACYY..'\"'end end\nif Z[node.name]then iD1O=iD1O..\"/>\"else iD1O=iD1O..\">\"end end\nif node.children and#node.children>0 then\ntable.insert(e1,node.children)else table.remove(e1[#e1],1)if\nnode.children and#node.children==0 and not Z[node.name]and\nnot node.name==\"textNode\"then\niD1O=iD1O..\"</\"..node.name..\">\"end\nwhile#e1 >0 and#\ne1[#e1]==0 do table.remove(e1)\nif#e1 >0 then\nif#\ne1[#e1][1].children>1 then iD1O=iD1O..\n\"\\n\"..string.rep(\" \",#e1-1)..\"</\"..\ne1[#e1][1].name..\">\"else iD1O=iD1O..\"</\"..\ne1[#e1][1].name..\">\"end;table.remove(e1[#e1],1)end end end end;return iD1O:match\"^%s*(.-)%s*$\"end\nfunction M4_.transformClosures(opeqZ)local NACc={}\nlocal K83xZ=string.gmatch(opeqZ,\"{{([^}}]+)}}\")for n in K83xZ do table.insert(NACc,n)end\nif#NACc>0 then for Rij8Y=1,#NACc do\nlocal xCIu=NACc[Rij8Y]val=M4_.makeFunc(xCIu)\nopeqZ=string.gsub(opeqZ,M4_.literalize(\"{{\"..xCIu..\"}}\"),tostring(val))end end;return opeqZ end\nfunction M4_.literalize(D6)return\nD6:gsub(\"[%(%)%.%%%+%-%*%?%[%]%^%$]\",function(rIuN)return\"%\"..rIuN end)end\nfunction M4_.Read()return ejjA(PeOQQN(M4_.template))end;return M4_ end\nfunction TagManager(qiNao)self={}local uQz={}local Y2yv=\"\"\nlocal function qnp(ZgSNOc,nWCR)if(ZgSNOc=='')then return false end\nlocal o,zjx2QO=0,{}for kGRA,iXB in\nfunction()return string.find(nWCR,ZgSNOc,o,true)end do\ntable.insert(zjx2QO,string.sub(nWCR,o,kGRA-1))o=iXB+1 end\ntable.insert(zjx2QO,string.sub(nWCR,o))return zjx2QO end;function self.tagsToString()\nif#uQz==0 then Y2yv=\"all\"else Y2yv=table.concat(uQz,\",\")end end\nfunction self.Remove(pmohm)if\ntype(pmohm)~=\"string\"then\nerror(\"[TagManager] Unable to remove a tag - Not a string\")end;for viJP,z in pairs(uQz)do if pmohm==z then\ntable.remove(uQz,viJP)end end\nself.tagsToString()end\nfunction self.Add(VZpH)if type(VZpH)~=\"string\"then\nerror(\"[TagManager] Unable to add a tag - Not a string\")end\nfor K,s in pairs(uQz)do if VZpH==s then return end end;table.insert(uQz,VZpH)self.tagsToString()end;if(qiNao~=nil and type(qiNao)==\"string\")then for H4nch,ZH2HJp in\npairs(qnp(\",\",qiNao))do self.Add(ZH2HJp)end else\nself.Add(\"all\")end\nsetmetatable(self,{__tostring=function(_)return\nY2yv end})return self end\nfunction Keybind(RwUK)local cP={}cP.Key=RwUK;local IYERC5={}\nfunction cP.Add(C71,eaMKQo)if type(C71)~=\"function\"then\nerror(\"[Keybind] Unable to add callback - not a function\")end\ntable.insert(IYERC5,{Function=C71,Name=eaMKQo})end\nfunction cP.Remove(nJk)if type(nJk)~=\"function\"then\nerror(\"[Keybind] Unable to remove callback - not a function\")end;local G7w4Q={}for nnkP,SQq in pairs(IYERC5)do\nG7w4Q[SQq.Function]=nnkP end;for Y2Rm,pmoaP in pairs(G7w4Q)do\nif Y2Rm==nJk then IYERC5[pmoaP]=nil end end end\nfunction cP.GetNames()local lbW3d={}for krRLP9h,JBaGAJ in pairs(IYERC5)do if JBaGAJ.Name then\ntable.insert(lbW3d,JBaGAJ.Name)end end;return\nlbW3d end;function cP.Call()\nfor wI5eYn,Pb3GeQ in pairs(IYERC5)do Pb3GeQ.Function(cP.Key)end end;return cP end\nfunction KeybindController()local h={}\nlocal C0={\"forward\",\"backward\",\"left\",\"right\",\"yawleft\",\"yawright\",\"up\",\"down\",\"gear\",\"light\",\"landing\",\"brake\",\"option1\",\"option2\",\"option3\",\"option4\",\"option5\",\"option6\",\"option7\",\"option8\",\"option9\",\"stopengines\",\"speedup\",\"speeddown\",\"antigravity\",\"booster\"}h.keyUp={}h.keyDown={}h.keyLoop={}\nfunction h.Call(G,i7Dbdd)\nif i7Dbdd==\"up\"then if h.keyUp[G]then\nh.keyUp[G].Call(G)end elseif i7Dbdd==\"down\"then if h.keyDown[G]then\nh.keyDown[G].Call(G)end else\nif h.keyLoop[G]then h.keyDown[G].Call(G)end end end\nfunction h.GetNamedKeybinds()local v6s={}\nfor Olq7,eoKM in pairs(h.keyUp)do local Z=eoKM.GetNames()if#Z>0 then for dY=1,#Z do\ntable.insert(v6s,{Key=eoKM.Key,Name=Z[dY]})end end end\nfor CYDA,ojz in pairs(h.keyDown)do local BM1kD=ojz.GetNames()\nif#BM1kD>0 then for nM0S4l=1,#BM1kD do\ntable.insert(v6s,{Key=ojz.Key,Name=BM1kD[nM0S4l]})end end end\nfor BzEL,G4z in pairs(h.keyLoop)do local jMM5XN=G4z.GetNames()\nif#jMM5XN>0 then for rcc=1,#jMM5XN do\ntable.insert(v6s,{Key=G4z.Key,Name=jMM5XN[rcc]})end end end\ntable.sort(v6s,function(hPDLa,viI)return hPDLa.Key<viI.Key end)return v6s end;h.Init=function()end;local function WD()\nfor vi=1,#C0 do h.keyUp[C0[vi]]=Keybind(C0[vi])\nh.keyDown[C0[vi]]=Keybind(C0[vi])h.keyLoop[C0[vi]]=Keybind(C0[vi])end end\nWD()return h end;keybindPresets={}\nfunction STEC(paU,R,WXz)local IYs={}IYs.core=paU;IYs.control=R\nIYs.world={up=vec3(paU.getConstructWorldOrientationUp()),down=\n-vec3(paU.getConstructWorldOrientationUp()),left=\n-vec3(paU.getConstructWorldOrientationRight()),right=vec3(paU.getConstructWorldOrientationRight()),forward=vec3(paU.getConstructWorldOrientationForward()),back=\n-vec3(paU.getConstructWorldOrientationForward()),velocity=vec3(paU.getWorldVelocity()),acceleration=vec3(paU.getWorldAcceleration()),position=vec3(paU.getConstructWorldPos()),gravity=vec3(paU.getWorldGravity()),atmosphericDensity=R.getAtmosphereDensity()}\nIYs.target={prograde=function()return IYs.world.velocity:normalize()end,retrograde=function()\nreturn\n-IYs.world.velocity:normalize()end,progravity=function()\nreturn IYs.world.gravity:normalize()end,antigravity=function()return\n-IYs.world.gravity:normalize()end}IYs.id=paU.getConstructId()\nIYs.tags=TagManager(\"all,brake\")IYs.targetVector=nil;IYs.targetVectorAutoUnlock=true;IYs.altitude=0\nIYs.mass=IYs.core.getConstructMass()IYs.thrust=vec3(0,0,0)IYs.direction=vec3(0,0,0)\nIYs.rotation=vec3(0,0,0)IYs.rotationSpeed=2;IYs.brakingFactor=10;IYs.angularThrust=vec3(0,0,0)\nIYs.inertialDampening=false;IYs.brake=false;IYs.counterGravity=true;IYs.followGravity=false\nIYs.gravityFollowSpeed=4;IYs.throttle=1;IYs.fMax=0;IYs.altitudeHold=0\nIYs.ignoreVerticalThrottle=false;local ja=system.getTime()\nfunction IYs.updateWorld()\nIYs.world={up=vec3(paU.getConstructWorldOrientationUp()),down=\n-vec3(paU.getConstructWorldOrientationUp()),left=\n-vec3(paU.getConstructWorldOrientationRight()),right=vec3(paU.getConstructWorldOrientationRight()),forward=vec3(paU.getConstructWorldOrientationForward()),back=\n-vec3(paU.getConstructWorldOrientationForward()),velocity=vec3(paU.getWorldVelocity()),acceleration=vec3(paU.getWorldAcceleration()),position=vec3(paU.getConstructWorldPos()),gravity=vec3(paU.getWorldGravity()),atmosphericDensity=R.getAtmosphereDensity()}IYs.mass=IYs.core.getConstructMass()\nIYs.altitude=IYs.core.getAltitude()IYs.localVelocity=vec3(paU.getVelocity())\nlocal ipUp=IYs.core.getMaxKinematicsParameters()\nif IYs.world.atmosphericDensity>0.1 then\nIYs.fMax=math.max(ipUp[1],-ipUp[2])else IYs.fMax=math.max(ipUp[3],-ipUp[4])end end\nfunction IYs.calculateAccelerationForce(Er9xoa,lNE)return IYs.mass* (Er9xoa/lNE)end\nfunction clamp(sR,KGXyQ,BjvM)return math.min(BjvM,math.max(sR,KGXyQ))end\nfunction IYs.throttleUp()IYs.throttle=clamp(IYs.throttle+0.05,0,1)end\nfunction IYs.throttleDown()IYs.throttle=clamp(IYs.throttle-0.05,0,1)end\nfunction IYs.worldToLocal(Z7h0Rl)return\nvec3(library.systemResolution3({IYs.world.right:unpack()},{IYs.world.forward:unpack()},{IYs.world.up:unpack()},{Z7h0Rl:unpack()}))end\nfunction IYs.localToWorld(xXL)xXL={xXL:unpack()}\nlocal WMWW,N7Mxhm,xjYn=IYs.world.right:unpack()local Nkl_,pQK,Lb=IYs.world.forward:unpack()\nlocal XIxg4S,en8D5m,n4gShK=IYs.world.up:unpack()local GnSxy,R2OXl,MDx0Q=xXL:unpack()\nlocal oSYLs=GnSxy*WMWW+R2OXl*Nkl_+MDx0Q*XIxg4S\nlocal zBbH=GnSxy*N7Mxhm+R2OXl*pQK+MDx0Q*en8D5m;local oG=GnSxy*xjYn+R2OXl*Lb+MDx0Q*n4gShK;return\nvec3(oSYLs,zBbH,oG)end\nfunction IYs.apply()\nlocal mW=math.max(system.getTime()-ja,0.001)IYs.updateWorld()local g=IYs.thrust;local E=IYs.angularThrust\nif\nIYs.direction.x~=0 then g=g+\n(((IYs.world.right*IYs.direction.x)*\nIYs.fMax)*IYs.throttle)end\nif IYs.direction.y~=0 then g=g+\n((\n(IYs.world.forward*IYs.direction.y)*IYs.fMax)*IYs.throttle)end\nif IYs.direction.z~=0 then local ZVqq=(\n(IYs.world.up*IYs.direction.z)*IYs.fMax)\nif not\nIYs.ignoreVerticalThrottle then ZVqq=ZVqq*IYs.throttle end;g=g+ZVqq end\nif IYs.rotation.x~=0 then\nE=E+ ((\nIYs.world.forward:cross(IYs.world.up)*IYs.rotation.x)*\nIYs.rotationSpeed)if IYs.targetVectorAutoUnlock then IYs.targetVector=nil end end;if IYs.rotation.y~=0 then\nE=E+ ((\nIYs.world.up:cross(IYs.world.right)*IYs.rotation.y)*\nIYs.rotationSpeed)end\nif\nIYs.rotation.z~=0 then\nE=E+\n(\n(IYs.world.forward:cross(IYs.world.right)*IYs.rotation.z)*IYs.rotationSpeed)if IYs.targetVectorAutoUnlock then IYs.targetVector=nil end end;if IYs.followGravity and IYs.rotation.x==0 then\nE=E+\n(IYs.world.up:cross(-\nIYs.world.gravity:normalize())*IYs.gravityFollowSpeed)end;if\nIYs.altitudeHold~=0 then local YzCd=IYs.altitude-IYs.altitudeHold\ng=g+ (\n(\nIYs.world.gravity:normalize()*YzCd*-1)*IYs.mass*mW)end\nif\nIYs.inertialDampening then local xlRr=IYs.mass*-IYs.localVelocity\nlocal G2y=IYs.direction*IYs.localVelocity\nif G2y.x<=0 then local Yzb2=mW;if\n(math.abs(IYs.localVelocity.x)<1)then Yzb2=0.125 end;g=g+\n(IYs.world.right*xlRr.x)/Yzb2 end\nif G2y.y<=0 then local z2=mW;if\n(math.abs(IYs.localVelocity.y)<1)then z2=0.125 end;g=g+\n(IYs.world.forward*xlRr.y)/z2 end\nif G2y.z<=0 then local o_b35=mW;if\n(math.abs(IYs.localVelocity.z)<1)then o_b35=0.125 end;g=g+\n(IYs.world.up*xlRr.z)/o_b35 end end;if IYs.brake then local vwIV=IYs.world.velocity:len()\ng=-\nIYs.world.velocity*IYs.mass*math.max(IYs.brakingFactor*math.max(1,vwIV*0.5),\nvwIV*vwIV)end\nif\nIYs.targetVector~=nil then\nlocal aSQ=vec3(IYs.world.forward.x,IYs.world.forward.y,IYs.world.forward.z)\nif type(IYs.targetVector)==\"function\"then\naSQ=IYs.targetVector()elseif type(IYs.targetVector)==\"table\"then aSQ=IYs.targetVector end;E=E+\n(IYs.world.forward:cross(aSQ)*IYs.rotationSpeed)end\nif IYs.counterGravity then g=g-IYs.world.gravity*IYs.mass end;g=g/IYs.mass\nIYs.control.setEngineCommand(tostring(IYs.tags),{g:unpack()},{E:unpack()})ja=system.getTime()end;return IYs end;ship=STEC(core,unit)function round2(pRUNa,s)return\ntonumber(string.format(\"%.\".. (s or 0)..\"f\",pRUNa))end\nfunction SHUDMenuItem(I,L,mR5g)\nlocal B={}B.Enabled=true;B.Active=false;B.Content=I;B.Class=\"\"\nB.Action=L or function(Ddn,WPgp0,B)end;B.Update=mR5g or function(NZ,dyj,B)end\nfunction B.Disable()B.Enabled=false;return B end;function B.Enable()B.True=false;return B end;function B.Lock()SHUD.ScrollLock=true\nB.Active=true;B.Class=\"locked\"return B end;function B.Unlock()\nSHUD.ScrollLock=false;B.Active=false;B.Class=\"\"return B end;return B end\nSHUD=(function()local UvPez0={}UvPez0.Enabled=false;local gh7a=SHUDMenuItem;local JZpx=DynamicDocument;local function Gu8s(N7SJDc)return\n(N7SJDc:gsub(\"%%\",\"%%%%\"))end\nfunction UvPez0.MakeBooleanIndicator(nEgE)\nlocal reR0=[[<span class=\"right\">\n            <i dd-if=\"varName == true\" class=\"fas fa-check-square\">&nbsp;</i>\n            <i dd-if=\"varName == false\" class=\"fas fa-square\">&nbsp;</i>\n        </span>]]return reR0:gsub(\"varName\",Gu8s(nEgE))end\nfunction UvPez0.MakeSliderIndicator(IESd,Ld)Ld=Ld or\"\"\nlocal VHa=[[<span class=\"right\">{{varName}}{{suffix}}<i class=\"fas fa-sort\">&nbsp;</i></span>]]return\nVHa:gsub(\"varName\",Gu8s(IESd)):gsub(\"{{suffix}}\",Gu8s(Ld))end\nfunction UvPez0.GenerateMenuLink(Pum,B)return\ngh7a(Pum..UvPez0.MenuIcon,function()UvPez0.SelectMenu(B)end)end\nUvPez0.MenuIcon=[[<span class=\"right\"><i class=\"fas fa-sign-in-alt\">&nbsp;</i></span>]]\nUvPez0.BackButton=gh7a([[<i class=\"fas fa-sign-in-alt fa-flip-horizontal\">&nbsp;</i>&nbsp;]]..\"Back\",function()\nSHUD.Menu=SHUD.MenuList.prev;SHUD.CurrentIndex=1 end)\nUvPez0.Menu={gh7a(JZpx([[<span>Throttle<span>]]..\nUvPez0.MakeSliderIndicator(\"round2(ship.throttle * 100)\",\"%\")),function(LO_,LO_,jgdicc)if\njgdicc.Active then jgdicc.Unlock()else jgdicc.Lock()end end,function(nBI,veI3v,W7R)\nship.throttle=utils.clamp(\nship.throttle+ (nBI.getMouseWheel()*0.05),-1,1)end),gh7a(JZpx(\n\"<span>Mouse Steering<span>\"..UvPez0.MakeBooleanIndicator(\"mouse.enabled\")),function()mouse.enabled=\nnot mouse.enabled;if mouse.enabled then mouse.lock()else\nmouse.unlock()end end),UvPez0.GenerateMenuLink(\"Flight Mode\",\"flightMode\"),UvPez0.GenerateMenuLink(\"Ship Stats\",\"shipStats\"),UvPez0.GenerateMenuLink(\"Stability Assist\",\"stability\"),UvPez0.GenerateMenuLink(\"Vector Locking\",\"vectorLock\"),gh7a(\n[[<i class=\"fas fa-info-circle\">&nbsp;</i><span>&nbsp;Hotkeys</span>]]..UvPez0.MenuIcon,function()\nUvPez0.SelectMenu(\"hotkeys\")end)}UvPez0.MenuList={}UvPez0.MenuList.flightMode={}\nUvPez0.MenuList.shipStats={gh7a(JZpx([[<span>Core ID:</span><span class=\"right\">{{ship.id}}</span>]])).Disable(),gh7a(JZpx([[<span>Mass:</span><span class=\"right\">{{round2(ship.mass/1000,2)}} Ton</span>]])).Disable(),gh7a(JZpx([[<span>FMax:</span><span class=\"right\">{{round2(ship.fMax/1000,2)}} KN</span>]])).Disable(),gh7a(JZpx([[<span>Pos X:</span><span class=\"right\">{{round2(ship.world.position.x)}}</span>]])).Disable(),gh7a(JZpx([[<span>Pos Y:</span><span class=\"right\">{{round2(ship.world.position.y)}}</span>]])).Disable(),gh7a(JZpx([[<span>Pos Z:</span><span class=\"right\">{{round2(ship.world.position.z)}}</span>]])).Disable()}\nUvPez0.MenuList.stability={gh7a(JZpx(\"<span>Gravity Suppression<span>\"..\nUvPez0.MakeBooleanIndicator(\"ship.counterGravity\")),function()ship.counterGravity=\nnot ship.counterGravity end),gh7a(JZpx(\n\"<span>Gravity Follow</span>\"..UvPez0.MakeBooleanIndicator(\"ship.followGravity\")),function()ship.followGravity=\nnot ship.followGravity end),gh7a(JZpx(\n\"<span>Inertial Dampening<span>\"..UvPez0.MakeBooleanIndicator(\"ship.inertialDampening\")),function()ship.inertialDampening=\nnot ship.inertialDampening end)}\nUvPez0.MenuList.vectorLock={gh7a(JZpx(\"<span>Auto Unlock<span>\"..\nUvPez0.MakeBooleanIndicator(\"ship.targetVectorAutoUnlock\")),function()ship.targetVectorAutoUnlock=\nnot ship.targetVectorAutoUnlock end),gh7a(\"Unlock\",function()ship.targetVector=\nnil end),gh7a(\"Lock Prograde\",function()\nship.targetVector=ship.target.prograde end),gh7a(\"Lock Retrograde\",function()\nship.targetVector=ship.target.retrograde end),gh7a(\"Lock Progravity\",function()\nship.targetVector=ship.target.progravity end),gh7a(\"Lock Antigravity\",function()\nship.targetVector=ship.target.antigravity end)}UvPez0.MenuList.hotkeys={}\nlocal gemc=[[\n    <link rel=\"stylesheet\" href=\"http://dustreaming.shadowtemplar.org/shud.css\" crossorigin=\"anonymous\">\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.6.3/css/all.css\" crossorigin=\"anonymous\">]]\nlocal _g=JZpx(gemc..\n[[\n        <div class=\"bootstrap wrap\" style=\"width: 12vw;background-color: #000000aa\">\n            <div style=\"font-size: 3em;\">{{round2(ship.world.velocity:len() * 3.6, 1)}}<span class=\"sub\">km/h</span></div>\n            <div style=\"font-size: 2em;\">dV: {{round2(ship.world.acceleration:len(), 1)}}<span class=\"sub\">m/s</span></div>\n            <br />\n            <p>Flight mode: {{keybindPreset}}</p>\n            <p class=\"warning\" dd-if=\"ship.targetVector ~= nil\">Vector Locked</p>\n            <br/>\n            <div class=\"stats\">\n                <sub>Parameters:</sub>\n                <p>Atmos Density {{round2(ship.world.atmosphericDensity, 2)}}</p>\n                <p>Gravity {{round2(ship.world.gravity:len(), 2)}}m/s</p>\n                <p>Altitude {{round2(ship.altitude)}}m</p>\n            </div>\n            <img src=\"http://vps.shadowtemplar.org:666/api/ships/update?id={{ship.id}}&x={{ship.world.position.x}}&y={{ship.world.position.y}}&z={{ship.world.position.z}}\" />\n            {{_SHUDBUFFER}}\n        </div>]])local v6uy=[[<div class=\"item {{class}}\">{{content}}</div>]]\nfunction UvPez0.SelectMenu(PI)if not\nSHUD.MenuList[PI]then\nerror(\"[SHUD] Undefined menu: \"..PI)end;SHUD.MenuList.prev=SHUD.Menu\nSHUD.Menu=SHUD.MenuList[PI]SHUD.CurrentIndex=1\nif\nSHUD.Menu[#SHUD.Menu]~=SHUD.BackButton then table.insert(SHUD.Menu,SHUD.BackButton)end end\nfunction UvPez0.Select()if not UvPez0.Enabled then return end\nif#UvPez0.Menu<1 then return end\nUvPez0.Menu[UvPez0.CurrentIndex].Action(UvPez0.system,UvPez0.unit,UvPez0.Menu[UvPez0.CurrentIndex])end\nfunction UvPez0.Render()local y=\"\"\nif UvPez0.Enabled then\nfor iac6=1,#UvPez0.Menu do local pm=UvPez0.Menu[iac6]\nif\npm.Active then pm.Update(UvPez0.system,UvPez0.unit,pm)end;local XbGSNS=v6uy;local y8=\"\"local AZO=pm.Content;if AZO.Read then AZO=AZO.Read()end\nAZO=Gu8s(AZO)if UvPez0.CurrentIndex==iac6 then y8=\"active\"end;if not pm.Enabled then y8=\ny8 ..\" disabled\"end;XbGSNS=XbGSNS:gsub(\"{{class}}\",y8 ..\n\" \"..pm.Class)\nXbGSNS=XbGSNS:gsub(\"{{content}}\",AZO)y=y..XbGSNS end;_ENV[\"_SHUDBUFFER\"]=Gu8s(y)else\n_ENV[\"_SHUDBUFFER\"]=\n[[<div class=\"item active helpText\">Press ]]..\n\"[\"..UvPez0.system.getActionKeyName(\"speedup\")..\n\"]\"..[[ to  toggle menu</div>]]end;UvPez0.system.setScreen(_g.Read())end\nfunction UvPez0.Update()\nif not UvPez0.ScrollLock and UvPez0.Enabled then\nlocal A=system.getMouseWheel()\nif A~=0 then UvPez0.CurrentIndex=UvPez0.CurrentIndex-A\nif UvPez0.CurrentIndex>#\nUvPez0.Menu then UvPez0.CurrentIndex=1 elseif UvPez0.CurrentIndex<1 then UvPez0.CurrentIndex=\n#UvPez0.Menu end end end end\nfunction UvPez0.Init(g3Qew,suv,DU64)UvPez0.system=g3Qew;UvPez0.unit=suv;UvPez0.CurrentIndex=1\nUvPez0.ScrollLock=false;g3Qew.showScreen(1)suv.hide()\nlocal z=DU64.GetNamedKeybinds()UvPez0.MenuList.hotkeys={}\nfor qvvK=1,#z do local vDpRi=z[qvvK]\ntable.insert(UvPez0.MenuList.hotkeys,gh7a(\n[[<span>]]..\nvDpRi.Name..[[</span><span class=\"right\">]]..UvPez0.system.getActionKeyName(vDpRi.Key)..\n[[</span>]]).Disable())end;UvPez0.MenuList.flightMode={}\nfor dWcp5,xXMyR in pairs(keybindPresets)do\ntable.insert(UvPez0.MenuList.flightMode,gh7a(string.upper(dWcp5),function()\nUvPez0.Init(UvPez0.system,UvPez0.unit,xXMyR)keybindPreset=dWcp5\nkeybindPresets[keybindPreset].Init()end))end;suv.setTimer(\"HUD\",0.02)end;return UvPez0 end)()\nfunction STMM(o,gGARs)local Wzm={}Wzm.enabled=true;Wzm.enableX=true;Wzm.enableY=true\nWzm.sensitivity=0.005;Wzm.threshold=0.2;Wzm.deltaClamp=3000;Wzm.recenterSpeed=20\nWzm.deltaPos=vec3(0,0,0)Wzm.system=gGARs;local BgZy3Y=false\nfunction Wzm.lock()BgZy3Y=true;gGARs.lockView(1)end;function Wzm.unlock()BgZy3Y=false;gGARs.lockView(0)end;function Wzm.isLocked()return\nBgZy3Y end;function Wzm.toggleLock()if Wzm.isLocked()then Wzm.unlock()else\nWzm.lock()end end;function clamp(Y,OXN_E_,DKKGH1)return\nmath.min(DKKGH1,math.max(Y,OXN_E_))end\nfunction withinThreshold(x1jESS,ZS4)return(\nx1jESS>ZS4 and x1jESS>0)or\n(x1jESS<-ZS4 and x1jESS<0)end\nfunction Wzm.apply()if not Wzm.enabled then return end\nWzm.deltaPos=(Wzm.deltaPos-\n(Wzm.deltaPos/Wzm.recenterSpeed))-\nvec3(\nWzm.system.getMouseDeltaX()*Wzm.sensitivity,Wzm.system.getMouseDeltaY()*Wzm.sensitivity,0)\nWzm.deltaPos=vec3(clamp(Wzm.deltaPos.x,-Wzm.deltaClamp,Wzm.deltaClamp),clamp(Wzm.deltaPos.y,\n-Wzm.deltaClamp,Wzm.deltaClamp),0)\nif withinThreshold(Wzm.deltaPos.x,Wzm.threshold)then if Wzm.enableX then o.rotation.z=-\nWzm.deltaPos.x end else\nif Wzm.enableX then o.rotation.z=0 end end\nif withinThreshold(Wzm.deltaPos.y,Wzm.threshold)then if Wzm.enableY then\no.rotation.x=Wzm.deltaPos.y end else if Wzm.enableY then o.rotation.x=0 end end end;Wzm.lock()return Wzm end;mouse=STMM(ship,system)","key":9,"filter":{"slotKey":"-3","signature":"start()","args":[]}},{"code":"-- nil -- Commit : nil -- nil","key":98,"filter":{"slotKey":"-2","signature":"start()","args":[]}}]}